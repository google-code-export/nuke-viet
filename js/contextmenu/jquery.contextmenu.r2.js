(function(b){function l(h,a,d){var c=g[h];j=b("#"+c.id).find("ul:first").clone(true);j.css(c.menuStyle).find("li").css(c.itemStyle).hover(function(){b(this).css(c.itemHoverStyle)},function(){b(this).css(c.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"});f.html(j);if(c.onShowMenu)f=c.onShowMenu(d,f);b.each(c.bindings,function(m,n){b("#"+m,f).bind("click",function(){k();n(a,o)})});f.css({left:d[c.eventPosX],top:d[c.eventPosY]}).show();c.shadow&&i.css({width:f.width(),height:f.height(),
left:d.pageX+2,top:d.pageY+2}).show();b(document).one("click",k)}function k(){f.hide();i.hide()}var f,i,j,g,o,e={menuStyle:{listStyle:"none",padding:"1px",margin:"0px",backgroundColor:"#fff",border:"1px solid #999",width:"100px"},itemStyle:{margin:"0px",color:"#000",display:"block",cursor:"default",padding:"3px",border:"1px solid #fff",backgroundColor:"transparent"},itemHoverStyle:{border:"1px solid #0a246a",backgroundColor:"#b6bdd2"},eventPosX:"pageX",eventPosY:"pageY",shadow:true,onContextMenu:null,
onShowMenu:null};b.fn.contextMenu=function(h,a){f||(f=b('<div id="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(c){c.stopPropagation()}));i||(i=b("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:0.2,zIndex:499}).appendTo("body").hide());g=g||[];g.push({id:h,menuStyle:b.extend({},e.menuStyle,a.menuStyle||{}),itemStyle:b.extend({},e.itemStyle,a.itemStyle||{}),itemHoverStyle:b.extend({},e.itemHoverStyle,a.itemHoverStyle||
{}),bindings:a.bindings||{},shadow:a.shadow||a.shadow===false?a.shadow:e.shadow,onContextMenu:a.onContextMenu||e.onContextMenu,onShowMenu:a.onShowMenu||e.onShowMenu,eventPosX:a.eventPosX||e.eventPosX,eventPosY:a.eventPosY||e.eventPosY});var d=g.length-1;b(this).bind("contextmenu",function(c){(g[d].onContextMenu?g[d].onContextMenu(c):true)&&l(d,this,c,a);return false});return this};b.contextMenu={defaults:function(h){b.each(h,function(a,d){if(typeof d=="object"&&e[a])b.extend(e[a],d);else e[a]=d})}}})(jQuery);
$(function(){$("div.contextMenu").hide()});